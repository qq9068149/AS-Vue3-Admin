import{w as z}from"./raf.997cffb5.js";import{d as U,q as V,J as j,K as R,x as q,L as W,M as F}from"./index.7be5bb68.js";var L={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},N={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},d=[],f=[];function G(){var a=document.createElement("div"),n=a.style;"AnimationEvent"in window||(delete L.animationstart.animation,delete N.animationend.animation),"TransitionEvent"in window||(delete L.transitionstart.transition,delete N.transitionend.transition);function e(r,A){for(var m in r)if(r.hasOwnProperty(m)){var l=r[m];for(var u in l)if(u in n){A.push(l[u]);break}}}e(L,d),e(N,f)}typeof window<"u"&&typeof document<"u"&&G();function I(a,n,e){a.addEventListener(n,e,!1)}function P(a,n,e){a.removeEventListener(n,e,!1)}var J={startEvents:d,addStartEventListener:function(n,e){if(d.length===0){setTimeout(e,0);return}d.forEach(function(r){I(n,r,e)})},removeStartEventListener:function(n,e){d.length!==0&&d.forEach(function(r){P(n,r,e)})},endEvents:f,addEndEventListener:function(n,e){if(f.length===0){setTimeout(e,0);return}f.forEach(function(r){I(n,r,e)})},removeEndEventListener:function(n,e){f.length!==0&&f.forEach(function(r){P(n,r,e)})}};const g=J;var c;function B(a){return!a||a.offsetParent===null}function K(a){var n=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return n&&n[1]&&n[2]&&n[3]?!(n[1]===n[2]&&n[2]===n[3]):!0}const X=U({compatConfig:{MODE:3},name:"Wave",props:{insertExtraNode:Boolean,disabled:Boolean},setup:function(n,e){var r=e.slots,A=e.expose,m=F(),l=V("",n),u=l.csp,v=l.prefixCls;A({csp:u});var p=null,h=null,y=null,S=!1,s=null,M=!1,w=function(t){if(!M){var i=W(m);!t||t.target!==i||S||k(i)}},C=function(t){!t||t.animationName!=="fadeEffect"||k(t.target)},O=function(){var t=n.insertExtraNode;return t?"".concat(v.value,"-click-animating"):"".concat(v.value,"-click-animating-without-extra-node")},D=function(t,i){var E=n.insertExtraNode,T=n.disabled;if(!(T||!t||B(t)||t.className.indexOf("-leave")>=0)){s=document.createElement("div"),s.className="".concat(v.value,"-click-animating-node");var b=O();if(t.removeAttribute(b),t.setAttribute(b,"true"),c=c||document.createElement("style"),i&&i!=="#ffffff"&&i!=="rgb(255, 255, 255)"&&K(i)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(i)&&i!=="transparent"){var x;(x=u.value)!==null&&x!==void 0&&x.nonce&&(c.nonce=u.value.nonce),s.style.borderColor=i,c.innerHTML=`
        [`.concat(v.value,"-click-animating-without-extra-node='true']::after, .").concat(v.value,`-click-animating-node {
          --antd-wave-shadow-color: `).concat(i,`;
        }`),document.body.contains(c)||document.body.appendChild(c)}E&&t.appendChild(s),g.addStartEventListener(t,w),g.addEndEventListener(t,C)}},k=function(t){if(!(!t||t===s||!(t instanceof Element))){var i=n.insertExtraNode,E=O();t.setAttribute(E,"false"),c&&(c.innerHTML=""),i&&s&&t.contains(s)&&t.removeChild(s),g.removeStartEventListener(t,w),g.removeEndEventListener(t,C)}},H=function(t){if(!(!t||!t.getAttribute||t.getAttribute("disabled")||t.className.indexOf("disabled")>=0)){var i=function(T){if(!(T.target.tagName==="INPUT"||B(T.target))){k(t);var b=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");h=setTimeout(function(){return D(t,b)},0),z.cancel(y),S=!0,y=z(function(){S=!1},10)}};return t.addEventListener("click",i,!0),{cancel:function(){t.removeEventListener("click",i,!0)}}}};return j(function(){R(function(){var o=W(m);o.nodeType===1&&(p=H(o))})}),q(function(){p&&p.cancel(),clearTimeout(h),M=!0}),function(){var o;return(o=r.default)===null||o===void 0?void 0:o.call(r)[0]}}});export{X as W};
