import{d as ee,j as C,x as se,C as ve,at as te,K as O,J as de,D as ae,h as N,n as g,b as j,a8 as ce,M as ne,q as fe,A as J,E as ge,a1 as Z,v as $}from"./index.7be5bb68.js";import{t as re,C as me,a as he,r as K,f as xe}from"./Input.8ca6da8a.js";import{R as be}from"./index.1cf7c7ff.js";import{w as R}from"./raf.997cffb5.js";import{a as ze}from"./antInputDirective.48450d4b.js";import{o as ie}from"./omit.51d8d70a.js";import{u as Se}from"./FormItemContext.ba37e9fe.js";var pe=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,ye=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],U={},z;function Ce(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=d.getAttribute("id")||d.getAttribute("data-reactid")||d.getAttribute("name");if(e&&U[r])return U[r];var n=window.getComputedStyle(d),m=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),c=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),b=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),v=ye.map(function(u){return"".concat(u,":").concat(n.getPropertyValue(u))}).join(";"),i={sizingStyle:v,paddingSize:c,borderSize:b,boxSizing:m};return e&&r&&(U[r]=i),i}function we(d){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;z||(z=document.createElement("textarea"),z.setAttribute("tab-index","-1"),z.setAttribute("aria-hidden","true"),document.body.appendChild(z)),d.getAttribute("wrap")?z.setAttribute("wrap",d.getAttribute("wrap")):z.removeAttribute("wrap");var m=Ce(d,e),c=m.paddingSize,b=m.borderSize,v=m.boxSizing,i=m.sizingStyle;z.setAttribute("style","".concat(i,";").concat(pe)),z.value=d.value||d.placeholder||"";var u=Number.MIN_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER,s=z.scrollHeight,S;if(v==="border-box"?s+=b:v==="content-box"&&(s-=c),r!==null||n!==null){z.value=" ";var E=z.scrollHeight-c;r!==null&&(u=E*r,v==="border-box"&&(u=u+c+b),s=Math.max(u,s)),n!==null&&(f=E*n,v==="border-box"&&(f=f+c+b),S=s>f?"":"hidden",s=Math.min(f,s))}return{height:"".concat(s,"px"),minHeight:"".concat(u,"px"),maxHeight:"".concat(f,"px"),overflowY:S,resize:"none"}}var L=0,Q=1,Ae=2,Ee=ee({compatConfig:{MODE:3},name:"ResizableTextArea",inheritAttrs:!1,props:re(),setup:function(e,r){var n=r.attrs,m=r.emit,c=r.expose,b,v,i=C(),u=C({}),f=C(L);se(function(){R.cancel(b),R.cancel(v)});var s=function(){try{if(document.activeElement===i.value){var h=i.value.selectionStart,p=i.value.selectionEnd;i.value.setSelectionRange(h,p)}}catch{}},S=function(){var h=e.autoSize||e.autosize;if(!(!h||!i.value)){var p=h.minRows,F=h.maxRows;u.value=we(i.value,!1,p,F),f.value=Q,R.cancel(v),v=R(function(){f.value=Ae,v=R(function(){f.value=L,s()})})}},E=function(){R.cancel(b),b=R(S)},w=function(h){if(f.value===L){m("resize",h);var p=e.autoSize||e.autosize;p&&E()}};ve(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var _=function(){var h=e.prefixCls,p=e.autoSize,F=e.autosize,Y=e.disabled,D=ie(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength","valueModifiers"]),k=ae(h,n.class,N({},"".concat(h,"-disabled"),Y)),V=[n.style,u.value,f.value===Q?{overflowX:"hidden",overflowY:"hidden"}:null],T=g(g(g({},D),n),{},{style:V,class:k});return T.autofocus||delete T.autofocus,T.rows===0&&delete T.rows,j(be,{onResize:w,disabled:!(p||F)},{default:function(){return[ce(j("textarea",g(g({},T),{},{ref:i}),null),[[ze]])]}})};te(function(){return e.value},function(){O(function(){S()})}),de(function(){O(function(){S()})});var I=ne();return c({resizeTextarea:S,textArea:i,instance:I}),function(){return _()}}});const Ie=Ee;function oe(d,e){return Z(d||"").slice(0,e).join("")}function W(d,e,r,n){var m=r;return d?m=oe(r,n):Z(e||"").length<r.length&&Z(r||"").length>n&&(m=e),m}const Me=ee({compatConfig:{MODE:3},name:"ATextarea",inheritAttrs:!1,props:re(),setup:function(e,r){var n=r.attrs,m=r.expose,c=r.emit,b=Se(),v=C(e.value===void 0?e.defaultValue:e.value),i=C(),u=C(""),f=fe("input",e),s=f.prefixCls,S=f.size,E=f.direction,w=J(function(){return e.showCount===""||e.showCount||!1}),_=J(function(){return Number(e.maxlength)>0}),I=C(!1),A=C(),h=C(0),p=function(t){I.value=!0,A.value=u.value,h.value=t.currentTarget.selectionStart,c("compositionstart",t)},F=function(t){I.value=!1;var a=t.currentTarget.value;if(_.value){var l,x=h.value>=e.maxlength+1||h.value===((l=A.value)===null||l===void 0?void 0:l.length);a=W(x,A.value,a,e.maxlength)}a!==u.value&&(V(a),K(t.currentTarget,t,G,a)),c("compositionend",t)},Y=ne();te(function(){return e.value},function(){"value"in Y.vnode.props;var o;v.value=(o=e.value)!==null&&o!==void 0?o:""});var D=function(t){var a;he((a=i.value)===null||a===void 0?void 0:a.textArea,t)},k=function(){var t,a;(t=i.value)===null||t===void 0||(a=t.textArea)===null||a===void 0||a.blur()},V=function(t,a){v.value!==t&&(e.value===void 0?v.value=t:O(function(){if(i.value.textArea.value!==u.value){var l,x,y;(l=i.value)===null||l===void 0||(x=(y=l.instance).update)===null||x===void 0||x.call(y)}}),O(function(){a&&a()}))},T=function(t){t.keyCode===13&&c("pressEnter",t),c("keydown",t)},X=function(t){var a=e.onBlur;a==null||a(t),b.onFieldBlur()},G=function(t){c("update:value",t.target.value),c("change",t),c("input",t),b.onFieldChange()},le=function(t){K(i.value.textArea,t,G),V("",function(){D()})},q=function(t){var a=t.target.composing,l=t.target.value;if(I.value=!!(t.isComposing||a),!(I.value&&e.lazy||v.value===l)){if(_.value){var x=t.target,y=x.selectionStart>=e.maxlength+1||x.selectionStart===l.length||!x.selectionStart;l=W(y,u.value,l,e.maxlength)}K(t.currentTarget,t,G,l),V(l)}},ue=function(){var t,a,l,x=n.style,y=n.class,B=e.bordered,M=B===void 0?!0:B,P=g(g(g({},ie(e,["allowClear"])),n),{},{style:w.value?{}:x,class:(t={},N(t,"".concat(s.value,"-borderless"),!M),N(t,"".concat(y),y&&!w.value),N(t,"".concat(s.value,"-sm"),S.value==="small"),N(t,"".concat(s.value,"-lg"),S.value==="large"),t),showCount:null,prefixCls:s.value,onInput:q,onChange:q,onBlur:X,onKeydown:T,onCompositionstart:p,onCompositionend:F});return(a=e.valueModifiers)!==null&&a!==void 0&&a.lazy&&delete P.onInput,j(Ie,g(g({},P),{},{id:(l=P.id)!==null&&l!==void 0?l:b.id.value,ref:i,maxlength:e.maxlength}),null)};return m({focus:D,blur:k,resizableTextArea:i}),ge(function(){var o=xe(v.value);!I.value&&_.value&&(e.value===null||e.value===void 0)&&(o=oe(o,e.maxlength)),u.value=o}),function(){var o=e.maxlength,t=e.bordered,a=t===void 0?!0:t,l=e.hidden,x=n.style,y=n.class,B=g(g(g({},e),n),{},{prefixCls:s.value,inputType:"text",handleReset:le,direction:E.value,bordered:a,style:w.value?void 0:x}),M=j(me,g(g({},B),{},{value:u.value}),{element:ue});if(w.value){var P=Z(u.value).length,H="";$(w.value)==="object"?H=w.value.formatter({count:P,maxlength:o}):H="".concat(P).concat(_.value?" / ".concat(o):""),M=j("div",{hidden:l,class:ae("".concat(s.value,"-textarea"),N({},"".concat(s.value,"-textarea-rtl"),E.value==="rtl"),"".concat(s.value,"-textarea-show-count"),y),style:x,"data-count":$(H)!=="object"?H:void 0},[M])}return M}}});export{Me as _};
