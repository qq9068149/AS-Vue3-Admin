import{d as Te,y as _n,A as L,i as $n,ax as ce,b as _,h as Y,P as me,ay as jn,j as te,aA as Gn,J as Hn,au as Wn,n as D,a0 as Be,D as Ke,M as ga,Y as Ee,a1 as xe,v as Fe,H as ze,R as Me,bm as pa,E as Pe,at as ke,x as Ka,a8 as ka,a9 as ba,a7 as ma,K as Cn,F as xa,aD as Ca,az as vn,ae as Na,bn as Un,bo as Sa,bp as Da,bq as Ea,ag as wa,I as Pa,q as Vn,ah as Oa,br as Ta,bs as La}from"./index.7be5bb68.js";import{o as Nn}from"./omit.51d8d70a.js";import{_ as Yn}from"./objectDestructuringEmpty.0d010311.js";import{L as Ia}from"./List.66b2ca19.js";import{p as qn}from"./pickAttrs.91330c1c.js";import{e as pe}from"./eagerComputed.a07f0796.js";import{c as Aa}from"./isSymbol.5fe9974f.js";import{i as Sn}from"./initDefaultProps.500766f6.js";import{K as Ie}from"./KeyCode.246a5a61.js";import{d as Fa}from"./debounce.63e29a78.js";var zn=Symbol("TreeContextKey"),Ma=Te({compatConfig:{MODE:3},name:"TreeContext",props:{value:{type:Object}},setup:function(e,t){var l=t.slots;return _n(zn,L(function(){return e.value})),function(){var o;return(o=l.default)===null||o===void 0?void 0:o.call(l)}}}),Dn=function(){return $n(zn,L(function(){return{}}))},Xn=Symbol("KeysStateKey"),Ba=function(e){_n(Xn,e)},Jn=function(){return $n(Xn,{expandedKeys:ce([]),selectedKeys:ce([]),loadedKeys:ce([]),loadingKeys:ce([]),checkedKeys:ce([]),halfCheckedKeys:ce([]),expandedKeysSet:L(function(){return new Set}),selectedKeysSet:L(function(){return new Set}),loadedKeysSet:L(function(){return new Set}),loadingKeysSet:L(function(){return new Set}),checkedKeysSet:L(function(){return new Set}),halfCheckedKeysSet:L(function(){return new Set}),flattenNodes:ce([])})},Ra=function(e){for(var t=e.prefixCls,l=e.level,o=e.isStart,c=e.isEnd,d="".concat(t,"-indent-unit"),r=[],u=0;u<l;u+=1){var f;r.push(_("span",{key:u,class:(f={},Y(f,d,!0),Y(f,"".concat(d,"-start"),o[u]),Y(f,"".concat(d,"-end"),c[u]),f)},null))}return _("span",{"aria-hidden":"true",class:"".concat(t,"-indent")},[r])};const _a=Ra;var Qn={eventKey:[String,Number],prefixCls:String,title:me.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:me.any,switcherIcon:me.any,domRef:{type:Function}},$a={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},Zn=function(){return{prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:me.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:me.any,selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:me.any,switcherIcon:me.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String}}},ja=["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"],Pn="open",On="close",Ga="---";const pn=Te({compatConfig:{MODE:3},name:"ATreeNode",inheritAttrs:!1,props:Qn,isTreeNode:1,slots:["title","icon","switcherIcon"],setup:function(e,t){var l=t.attrs,o=t.slots,c=t.expose;jn(!("slots"in e.data),"treeData slots is deprecated, please use ".concat(Object.keys(e.data.slots||{}).map(function(C){return"`v-slot:"+C+"` "}),"instead"));var d=te(!1),r=Dn(),u=Jn(),f=u.expandedKeysSet,k=u.selectedKeysSet,g=u.loadedKeysSet,p=u.loadingKeysSet,N=u.checkedKeysSet,x=u.halfCheckedKeysSet,E=r.value,a=E.dragOverNodeKey,h=E.dropPosition,K=E.keyEntities,O=L(function(){return bn(e.eventKey,{expandedKeysSet:f.value,selectedKeysSet:k.value,loadedKeysSet:g.value,loadingKeysSet:p.value,checkedKeysSet:N.value,halfCheckedKeysSet:x.value,dragOverNodeKey:a,dropPosition:h,keyEntities:K})}),B=pe(function(){return O.value.expanded}),$=pe(function(){return O.value.selected}),V=pe(function(){return O.value.checked}),ae=pe(function(){return O.value.loaded}),U=pe(function(){return O.value.loading}),I=pe(function(){return O.value.halfChecked}),Z=pe(function(){return O.value.dragOver}),w=pe(function(){return O.value.dragOverGapTop}),P=pe(function(){return O.value.dragOverGapBottom}),A=pe(function(){return O.value.pos}),j=te(),re=L(function(){var C=e.eventKey,i=r.value.keyEntities,b=i[C]||{},G=b.children;return!!(G||[]).length}),q=L(function(){var C=e.isLeaf,i=r.value.loadData,b=re.value;return C===!1?!1:C||!i&&!b||i&&ae.value&&!b}),le=L(function(){return q.value?null:B.value?Pn:On}),W=L(function(){var C=e.disabled,i=r.value.disabled;return!!(i||C)}),X=L(function(){var C=e.checkable,i=r.value.checkable;return!i||C===!1?!1:i}),ue=L(function(){var C=e.selectable,i=r.value.selectable;return typeof C=="boolean"?C:i}),J=L(function(){var C=e.data,i=e.active,b=e.checkable,G=e.disableCheckbox,m=e.disabled,v=e.selectable;return D(D({active:i,checkable:b,disableCheckbox:G,disabled:m,selectable:v},C),{},{dataRef:C,data:C,isLeaf:q.value,checked:V.value,expanded:B.value,loading:U.value,selected:$.value,halfChecked:I.value})}),fe=ga(),ie=L(function(){var C=e.eventKey,i=r.value.keyEntities,b=i[C]||{},G=b.parent;return D(D({},mn(Ee({},e,O.value))),{},{parent:G})}),ye=Gn({eventData:ie,eventKey:L(function(){return e.eventKey}),selectHandle:j,pos:A,key:fe.vnode.key});c(ye);var Ce=function(i){var b=r.value.onNodeDoubleClick;b(i,ie.value)},_e=function(i){if(!W.value){var b=r.value.onNodeSelect;i.preventDefault(),b(i,ie.value)}},Ae=function(i){if(!W.value){var b=e.disableCheckbox,G=r.value.onNodeCheck;if(!(!X.value||b)){i.preventDefault();var m=!V.value;G(i,ie.value,m)}}},$e=function(i){var b=r.value.onNodeClick;b(i,ie.value),ue.value?_e(i):Ae(i)},Je=function(i){var b=r.value.onNodeMouseEnter;b(i,ie.value)},Qe=function(i){var b=r.value.onNodeMouseLeave;b(i,ie.value)},Ze=function(i){var b=r.value.onNodeContextMenu;b(i,ie.value)},en=function(i){var b=r.value.onNodeDragStart;i.stopPropagation(),d.value=!0,b(i,ye);try{i.dataTransfer.setData("text/plain","")}catch{}},nn=function(i){var b=r.value.onNodeDragEnter;i.preventDefault(),i.stopPropagation(),b(i,ye)},an=function(i){var b=r.value.onNodeDragOver;i.preventDefault(),i.stopPropagation(),b(i,ye)},tn=function(i){var b=r.value.onNodeDragLeave;i.stopPropagation(),b(i,ye)},je=function(i){var b=r.value.onNodeDragEnd;i.stopPropagation(),d.value=!1,b(i,ye)},Ge=function(i){var b=r.value.onNodeDrop;i.preventDefault(),i.stopPropagation(),d.value=!1,b(i,ye)},He=function(i){var b=r.value.onNodeExpand;U.value||b(i,ie.value)},rn=function(){var i=e.data,b=r.value.draggable;return!!(b&&(!b.nodeDraggable||b.nodeDraggable(i)))},on=function(){var i=r.value,b=i.draggable,G=i.prefixCls;return b&&b!==null&&b!==void 0&&b.icon?_("span",{class:"".concat(G,"-draggable-icon")},[b.icon]):null},ln=function(){var i,b,G,m=e.switcherIcon,v=m===void 0?o.switcherIcon||((i=r.value.slots)===null||i===void 0?void 0:i[(b=e.data)===null||b===void 0||(G=b.slots)===null||G===void 0?void 0:G.switcherIcon]):m,s=r.value.switcherIcon,y=v||s;return typeof y=="function"?y(J.value):y},We=function(){var i=r.value,b=i.loadData,G=i.onNodeLoad;U.value||b&&B.value&&!q.value&&!re.value&&!ae.value&&G(ie.value)};Hn(function(){We()}),Wn(function(){We()});var dn=function(){var i=r.value.prefixCls,b=ln();if(q.value)return b!==!1?_("span",{class:Ke("".concat(i,"-switcher"),"".concat(i,"-switcher-noop"))},[b]):null;var G=Ke("".concat(i,"-switcher"),"".concat(i,"-switcher_").concat(B.value?Pn:On));return b!==!1?_("span",{onClick:He,class:G},[b]):null},Le=function(){var i,b,G=e.disableCheckbox,m=r.value.prefixCls,v=W.value,s=X.value;return s?_("span",{class:Ke("".concat(m,"-checkbox"),V.value&&"".concat(m,"-checkbox-checked"),!V.value&&I.value&&"".concat(m,"-checkbox-indeterminate"),(v||G)&&"".concat(m,"-checkbox-disabled")),onClick:Ae},[(i=(b=r.value).customCheckable)===null||i===void 0?void 0:i.call(b)]):null},Ue=function(){var i=r.value.prefixCls;return _("span",{class:Ke("".concat(i,"-iconEle"),"".concat(i,"-icon__").concat(le.value||"docu"),U.value&&"".concat(i,"-icon_loading"))},null)},cn=function(){var i=e.disabled,b=e.eventKey,G=r.value,m=G.draggable,v=G.dropLevelOffset,s=G.dropPosition,y=G.prefixCls,R=G.indent,F=G.dropIndicatorRender,T=G.dragOverNodeKey,S=G.direction,M=m!==!1,H=!i&&M&&T===b;return H?F({dropPosition:s,dropLevelOffset:v,indent:R,prefixCls:y,direction:S}):null},Ne=function(){var i,b,G,m,v=e.icon,s=v===void 0?o.icon:v,y=e.data,R=o.title||((i=r.value.slots)===null||i===void 0?void 0:i[(b=e.data)===null||b===void 0||(G=b.slots)===null||G===void 0?void 0:G.title])||((m=r.value.slots)===null||m===void 0?void 0:m.title)||e.title,F=r.value,T=F.prefixCls,S=F.showIcon,M=F.icon,H=F.loadData,z=W.value,Q="".concat(T,"-node-content-wrapper"),ee;if(S){var oe,de,se=s||((oe=r.value.slots)===null||oe===void 0?void 0:oe[y==null||(de=y.slots)===null||de===void 0?void 0:de.icon])||M;ee=se?_("span",{class:Ke("".concat(T,"-iconEle"),"".concat(T,"-icon__customize"))},[typeof se=="function"?se(J.value):se]):Ue()}else H&&U.value&&(ee=Ue());var ve;typeof R=="function"?ve=R(J.value):ve=R,ve=ve===void 0?Ga:ve;var ne=_("span",{class:"".concat(T,"-title")},[ve]);return _("span",{ref:j,title:typeof R=="string"?R:"",class:Ke("".concat(Q),"".concat(Q,"-").concat(le.value||"normal"),!z&&($.value||d.value)&&"".concat(T,"-node-selected")),onMouseenter:Je,onMouseleave:Qe,onContextmenu:Ze,onClick:$e,onDblclick:Ce},[ee,ne,cn()])};return function(){var C,i=D(D({},e),l),b=i.eventKey,G=i.isLeaf,m=i.isStart,v=i.isEnd,s=i.domRef,y=i.active;i.data;var R=i.onMousemove,F=i.selectable,T=Be(i,ja),S=r.value,M=S.prefixCls,H=S.filterTreeNode,z=S.keyEntities,Q=S.dropContainerKey,ee=S.dropTargetKey,oe=S.draggingNodeKey,de=W.value,se=qn(T,{aria:!0,data:!0}),ve=z[b]||{},ne=ve.level,he=v[v.length-1],ge=rn(),Se=!de&&ge,Ve=oe===b,un=F!==void 0?{"aria-selected":!!F}:void 0;return _("div",D(D({ref:s,class:Ke(l.class,"".concat(M,"-treenode"),(C={},Y(C,"".concat(M,"-treenode-disabled"),de),Y(C,"".concat(M,"-treenode-switcher-").concat(B.value?"open":"close"),!G),Y(C,"".concat(M,"-treenode-checkbox-checked"),V.value),Y(C,"".concat(M,"-treenode-checkbox-indeterminate"),I.value),Y(C,"".concat(M,"-treenode-selected"),$.value),Y(C,"".concat(M,"-treenode-loading"),U.value),Y(C,"".concat(M,"-treenode-active"),y),Y(C,"".concat(M,"-treenode-leaf-last"),he),Y(C,"".concat(M,"-treenode-draggable"),Se),Y(C,"dragging",Ve),Y(C,"drop-target",ee===b),Y(C,"drop-container",Q===b),Y(C,"drag-over",!de&&Z.value),Y(C,"drag-over-gap-top",!de&&w.value),Y(C,"drag-over-gap-bottom",!de&&P.value),Y(C,"filter-node",H&&H(ie.value)),C)),style:l.style,draggable:Se,"aria-grabbed":Ve,onDragstart:Se?en:void 0,onDragenter:ge?nn:void 0,onDragover:ge?an:void 0,onDragleave:ge?tn:void 0,onDrop:ge?Ge:void 0,onDragend:ge?je:void 0,onMousemove:R},un),se),[_(_a,{prefixCls:M,level:ne,isStart:m,isEnd:v},null),on(),dn(),Le(),Ne()])}}});function De(n,e){if(!n)return[];var t=n.slice(),l=t.indexOf(e);return l>=0&&t.splice(l,1),t}function we(n,e){var t=(n||[]).slice();return t.indexOf(e)===-1&&t.push(e),t}function En(n){return n.split("-")}function ea(n,e){return"".concat(n,"-").concat(e)}function Ha(n){return n&&n.type&&n.type.isTreeNode}function Wa(n,e){var t=[],l=e[n];function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(d){var r=d.key,u=d.children;t.push(r),o(u)})}return o(l.children),t}function Ua(n){if(n.parent){var e=En(n.pos);return Number(e[e.length-1])===n.parent.children.length-1}return!1}function Va(n){var e=En(n.pos);return Number(e[e.length-1])===0}function Tn(n,e,t,l,o,c,d,r,u,f){var k,g=n.clientX,p=n.clientY,N=n.target.getBoundingClientRect(),x=N.top,E=N.height,a=(f==="rtl"?-1:1)*(((o==null?void 0:o.x)||0)-g),h=(a-12)/l,K=r[t.eventKey];if(p<x+E/2){var O=d.findIndex(function(re){return re.key===K.key}),B=O<=0?0:O-1,$=d[B].key;K=r[$]}var V=K.key,ae=K,U=K.key,I=0,Z=0;if(!u.has(V))for(var w=0;w<h&&Ua(K);w+=1)K=K.parent,Z+=1;var P=e.eventData,A=K.node,j=!0;return Va(K)&&K.level===0&&p<x+E/2&&c({dragNode:P,dropNode:A,dropPosition:-1})&&K.key===t.eventKey?I=-1:(ae.children||[]).length&&u.has(U)?c({dragNode:P,dropNode:A,dropPosition:0})?I=0:j=!1:Z===0?h>-1.5?c({dragNode:P,dropNode:A,dropPosition:1})?I=1:j=!1:c({dragNode:P,dropNode:A,dropPosition:0})?I=0:c({dragNode:P,dropNode:A,dropPosition:1})?I=1:j=!1:c({dragNode:P,dropNode:A,dropPosition:1})?I=1:j=!1,{dropPosition:I,dropLevelOffset:Z,dropTargetKey:K.key,dropTargetPos:K.pos,dragOverNodeKey:U,dropContainerKey:I===0?null:((k=K.parent)===null||k===void 0?void 0:k.key)||null,dropAllowed:j}}function Ln(n,e){if(!!n){var t=e.multiple;return t?n.slice():n.length?[n[0]]:n}}function sn(n){if(!n)return null;var e;if(Array.isArray(n))e={checkedKeys:n,halfCheckedKeys:void 0};else if(Fe(n)==="object")e={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return null;return e}function Kn(n,e){var t=new Set;function l(o){if(!t.has(o)){var c=e[o];if(!!c){t.add(o);var d=c.parent,r=c.node;r.disabled||d&&l(d.key)}}}return(n||[]).forEach(function(o){l(o)}),xe(t)}var Ya=["title","icon","switcherIcon"];function Re(n,e){return n!=null?n:e}function Xe(n){var e=n||{},t=e.title,l=e._title,o=e.key,c=e.children,d=t||"title";return{title:d,_title:l||[d],key:o||"key",children:c||"children"}}function kn(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=ze(t);return l.map(function(o){var c,d,r,u;if(!Ha(o))return null;for(var f=o.children||{},k=o.key,g={},p=0,N=Object.entries(o.props);p<N.length;p++){var x=Me(N[p],2),E=x[0],a=x[1];g[pa(E)]=a}var h=g.isLeaf,K=g.checkable,O=g.selectable,B=g.disabled,$=g.disableCheckbox,V={isLeaf:h||h===""||void 0,checkable:K||K===""||void 0,selectable:O||O===""||void 0,disabled:B||B===""||void 0,disableCheckbox:$||$===""||void 0},ae=D(D({},g),V),U=g.title,I=U===void 0?(c=f.title)===null||c===void 0?void 0:c.call(f,ae):U,Z=g.icon,w=Z===void 0?(d=f.icon)===null||d===void 0?void 0:d.call(f,ae):Z,P=g.switcherIcon,A=P===void 0?(r=f.switcherIcon)===null||r===void 0?void 0:r.call(f,ae):P,j=Be(g,Ya),re=(u=f.default)===null||u===void 0?void 0:u.call(f),q=D(D({},j),{},{title:I,icon:w,switcherIcon:A,key:k,isLeaf:h},V),le=e(re);return le.length&&(q.children=le),q})}return e(n)}function qa(n,e,t){var l=Xe(t),o=l._title,c=l.key,d=l.children,r=new Set(e===!0?[]:e),u=[];function f(k){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return k.map(function(p,N){for(var x=ea(g?g.pos:"0",N),E=Re(p[c],x),a,h=0;h<o.length;h+=1){var K=o[h];if(p[K]!==void 0){a=p[K];break}}var O=D(D({},Nn(p,[].concat(xe(o),[c,d]))),{},{title:a,key:E,parent:g,pos:x,children:null,data:p,isStart:[].concat(xe(g?g.isStart:[]),[N===0]),isEnd:[].concat(xe(g?g.isEnd:[]),[N===k.length-1])});return u.push(O),e===!0||r.has(E)?O.children=f(p[d]||[],O):O.children=[],O})}return f(n),u}function za(n,e,t){var l={};Fe(t)==="object"?l=t:l={externalGetKey:t},l=l||{};var o=l,c=o.childrenPropName,d=o.externalGetKey,r=o.fieldNames,u=Xe(r),f=u.key,k=u.children,g=c||k,p;d?typeof d=="string"?p=function(E){return E[d]}:typeof d=="function"&&(p=function(E){return d(E)}):p=function(E,a){return Re(E[f],a)};function N(x,E,a,h){var K=x?x[g]:n,O=x?ea(a.pos,E):"0",B=x?[].concat(xe(h),[x]):[];if(x){var $=p(x,O),V={node:x,index:E,pos:O,key:$,parentPos:a.node?a.pos:null,level:a.level+1,nodes:B};e(V)}K&&K.forEach(function(ae,U){N(ae,U,{node:x,pos:O,level:a?a.level+1:-1},B)})}N(null)}function na(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.initWrapper,l=e.processEntity,o=e.onProcessFinished,c=e.externalGetKey,d=e.childrenPropName,r=e.fieldNames,u=arguments.length>2?arguments[2]:void 0,f=c||u,k={},g={},p={posEntities:k,keyEntities:g};return t&&(p=t(p)||p),za(n,function(N){var x=N.node,E=N.index,a=N.pos,h=N.key,K=N.parentPos,O=N.level,B=N.nodes,$={node:x,nodes:B,index:E,key:h,pos:a,level:O},V=Re(h,a);k[a]=$,g[V]=$,$.parent=k[K],$.parent&&($.parent.children=$.parent.children||[],$.parent.children.push($)),l&&l($,p)},{externalGetKey:f,childrenPropName:d,fieldNames:r}),o&&o(p),p}function bn(n,e){var t=e.expandedKeysSet,l=e.selectedKeysSet,o=e.loadedKeysSet,c=e.loadingKeysSet,d=e.checkedKeysSet,r=e.halfCheckedKeysSet,u=e.dragOverNodeKey,f=e.dropPosition,k=e.keyEntities,g=k[n],p={eventKey:n,expanded:t.has(n),selected:l.has(n),loaded:o.has(n),loading:c.has(n),checked:d.has(n),halfChecked:r.has(n),pos:String(g?g.pos:""),parent:g.parent,dragOver:u===n&&f===0,dragOverGapTop:u===n&&f===-1,dragOverGapBottom:u===n&&f===1};return p}function mn(n){var e=n.data,t=n.expanded,l=n.selected,o=n.checked,c=n.loaded,d=n.loading,r=n.halfChecked,u=n.dragOver,f=n.dragOverGapTop,k=n.dragOverGapBottom,g=n.pos,p=n.active,N=n.eventKey,x=D(D({dataRef:e},e),{},{expanded:t,selected:l,checked:o,loaded:c,loading:d,halfChecked:r,dragOver:u,dragOverGapTop:f,dragOverGapBottom:k,pos:g,active:p,eventKey:N,key:N});return"props"in x||Object.defineProperty(x,"props",{get:function(){return n}}),x}function aa(n,e){var t=new Set;return n.forEach(function(l){e.has(l)||t.add(l)}),t}function Xa(n){var e=n||{},t=e.disabled,l=e.disableCheckbox,o=e.checkable;return!!(t||l)||o===!1}function Ja(n,e,t,l){for(var o=new Set(n),c=new Set,d=0;d<=t;d+=1){var r=e.get(d)||new Set;r.forEach(function(g){var p=g.key,N=g.node,x=g.children,E=x===void 0?[]:x;o.has(p)&&!l(N)&&E.filter(function(a){return!l(a.node)}).forEach(function(a){o.add(a.key)})})}for(var u=new Set,f=t;f>=0;f-=1){var k=e.get(f)||new Set;k.forEach(function(g){var p=g.parent,N=g.node;if(!(l(N)||!g.parent||u.has(g.parent.key))){if(l(g.parent.node)){u.add(p.key);return}var x=!0,E=!1;(p.children||[]).filter(function(a){return!l(a.node)}).forEach(function(a){var h=a.key,K=o.has(h);x&&!K&&(x=!1),!E&&(K||c.has(h))&&(E=!0)}),x&&o.add(p.key),E&&c.add(p.key),u.add(p.key)}})}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(aa(c,o))}}function Qa(n,e,t,l,o){for(var c=new Set(n),d=new Set(e),r=0;r<=l;r+=1){var u=t.get(r)||new Set;u.forEach(function(p){var N=p.key,x=p.node,E=p.children,a=E===void 0?[]:E;!c.has(N)&&!d.has(N)&&!o(x)&&a.filter(function(h){return!o(h.node)}).forEach(function(h){c.delete(h.key)})})}d=new Set;for(var f=new Set,k=l;k>=0;k-=1){var g=t.get(k)||new Set;g.forEach(function(p){var N=p.parent,x=p.node;if(!(o(x)||!p.parent||f.has(p.parent.key))){if(o(p.parent.node)){f.add(N.key);return}var E=!0,a=!1;(N.children||[]).filter(function(h){return!o(h.node)}).forEach(function(h){var K=h.key,O=c.has(K);E&&!O&&(E=!1),!a&&(O||d.has(K))&&(a=!0)}),E||c.delete(N.key),a&&d.add(N.key),f.add(N.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(aa(d,c))}}function fn(n,e,t,l,o,c){var d;c?d=c:d=Xa;var r=new Set(n.filter(function(f){var k=!!t[f];return k})),u;return e===!0?u=Ja(r,o,l,d):u=Qa(r,e.halfCheckedKeys,o,l,d),u}function Za(n){var e=te(0),t=ce();return Pe(function(){var l=new Map,o=0,c=n.value||{};for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var r=c[d],u=r.level,f=l.get(u);f||(f=new Set,l.set(u,f)),f.add(r),o=Math.max(o,u)}e.value=o,t.value=l}),{maxLevel:e,levelEntities:t}}var et=["motion","motionNodes","motionType","active","eventKey"];const nt=Te({compatConfig:{MODE:3},name:"MotionTreeNode",inheritAttrs:!1,props:D(D({},Qn),{},{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),slots:["title","icon","switcherIcon","checkable"],setup:function(e,t){var l=t.attrs,o=t.slots,c=te(!0),d=Dn(),r=te(!1),u=L(function(){return e.motion?e.motion:Aa()}),f=function(g,p){if(p==="appear"){var N,x;(N=u.value)===null||N===void 0||(x=N.onAfterEnter)===null||x===void 0||x.call(N,g)}else if(p==="leave"){var E,a;(E=u.value)===null||E===void 0||(a=E.onAfterLeave)===null||a===void 0||a.call(E,g)}r.value||e.onMotionEnd(),r.value=!0};return ke(function(){return e.motionNodes},function(){e.motionNodes&&e.motionType==="hide"&&c.value&&Cn(function(){c.value=!1})},{immediate:!0,flush:"post"}),Hn(function(){e.motionNodes&&e.onMotionStart()}),Ka(function(){e.motionNodes&&f()}),function(){e.motion;var k=e.motionNodes,g=e.motionType,p=e.active,N=e.eventKey,x=Be(e,et);return k?_(ma,D(D({},u.value),{},{appear:g==="show",onAfterAppear:function(a){return f(a,"appear")},onAfterLeave:function(a){return f(a,"leave")}}),{default:function(){return[ka(_("div",{class:"".concat(d.value.prefixCls,"-treenode-motion")},[k.map(function(a){var h=Ee({},(Yn(a.data),a.data)),K=a.title,O=a.key,B=a.isStart,$=a.isEnd;return delete h.children,_(pn,D(D({},h),{},{title:K,active:p,data:a.data,key:O,eventKey:O,isStart:B,isEnd:$}),o)})]),[[ba,c.value]])]}}):_(pn,D(D({domRef:te,class:l.class,style:l.style},x),{},{active:p,eventKey:N}),o)}}});function at(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=n.length,l=e.length;if(Math.abs(t-l)!==1)return{add:!1,key:null};function o(c,d){var r=new Map;c.forEach(function(f){r.set(f,!0)});var u=d.filter(function(f){return!r.has(f)});return u.length===1?u[0]:null}return t<l?{add:!0,key:o(n,e)}:{add:!1,key:o(e,n)}}function In(n,e,t){var l=n.findIndex(function(r){return r.key===t}),o=n[l+1],c=e.findIndex(function(r){return r.key===t});if(o){var d=e.findIndex(function(r){return r.key===o.key});return e.slice(c+1,d)}return e.slice(c+1)}var tt=["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"],An={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},rt=function(){},Oe="RC_TREE_MOTION_".concat(Math.random()),xn={key:Oe},ta={key:Oe,level:0,index:0,pos:"0",node:xn,nodes:[xn]},Fn={parent:null,children:[],pos:ta.pos,data:xn,title:null,key:Oe,isStart:[],isEnd:[]};function Mn(n,e,t,l){return e===!1||!t?n:n.slice(0,Math.ceil(t/l)+1)}function Bn(n){var e=n.key,t=n.pos;return Re(e,t)}function ot(n){for(var e=String(n.key),t=n;t.parent;)t=t.parent,e="".concat(t.key," > ").concat(e);return e}const lt=Te({compatConfig:{MODE:3},name:"NodeList",inheritAttrs:!1,props:$a,setup:function(e,t){var l=t.expose,o=t.attrs,c=te(),d=te(),r=Jn(),u=r.expandedKeys,f=r.flattenNodes;l({scrollTo:function(K){c.value.scrollTo(K)},getIndentWidth:function(){return d.value.offsetWidth}});var k=ce(f.value),g=ce([]),p=te(null);function N(){k.value=f.value,g.value=[],p.value=null,e.onListChangeEnd()}var x=Dn();ke([function(){return u.value.slice()},f],function(h,K){var O=Me(h,2),B=O[0],$=O[1],V=Me(K,2),ae=V[0],U=V[1],I=at(ae,B);if(I.key!==null){var Z=e.virtual,w=e.height,P=e.itemHeight;if(I.add){var A=U.findIndex(function(X){var ue=X.key;return ue===I.key}),j=Mn(In(U,$,I.key),Z,w,P),re=U.slice();re.splice(A+1,0,Fn),k.value=re,g.value=j,p.value="show"}else{var q=$.findIndex(function(X){var ue=X.key;return ue===I.key}),le=Mn(In($,U,I.key),Z,w,P),W=$.slice();W.splice(q+1,0,Fn),k.value=W,g.value=le,p.value="hide"}}else U!==$&&(k.value=$)}),ke(function(){return x.value.dragging},function(h){h||N()});var E=L(function(){return e.motion===void 0?k.value:f.value}),a=function(){e.onActiveChange(null)};return function(){var h=D(D({},e),o),K=h.prefixCls;h.selectable,h.checkable;var O=h.disabled,B=h.motion,$=h.height,V=h.itemHeight,ae=h.virtual,U=h.focusable,I=h.activeItem,Z=h.focused,w=h.tabindex,P=h.onKeydown,A=h.onFocus,j=h.onBlur,re=h.onListChangeStart;h.onListChangeEnd;var q=Be(h,tt);return _(xa,null,[Z&&I&&_("span",{style:An,"aria-live":"assertive"},[ot(I)]),_("div",null,[_("input",{style:An,disabled:U===!1||O,tabindex:U!==!1?w:null,onKeydown:P,onFocus:A,onBlur:j,value:"",onChange:rt,"aria-label":"for screen reader"},null)]),_("div",{class:"".concat(K,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[_("div",{class:"".concat(K,"-indent")},[_("div",{ref:d,class:"".concat(K,"-indent-unit")},null)])]),_(Ia,D(D({},Nn(q,["onActiveChange"])),{},{data:E.value,itemKey:Bn,height:$,fullHeight:!1,virtual:ae,itemHeight:V,prefixCls:"".concat(K,"-list"),ref:c,onVisibleChange:function(W,X){var ue=new Set(W),J=X.filter(function(fe){return!ue.has(fe)});J.some(function(fe){return Bn(fe)===Oe})&&N()}}),{default:function(W){var X=W.pos,ue=Ee({},(Yn(W.data),W.data)),J=W.title,fe=W.key,ie=W.isStart,ye=W.isEnd,Ce=Re(fe,X);return delete ue.key,delete ue.children,_(nt,D(D({},ue),{},{eventKey:Ce,title:J,active:!!I&&fe===I.key,data:W.data,isStart:ie,isEnd:ye,motion:B,motionNodes:fe===Oe?g.value:null,motionType:p.value,onMotionStart:re,onMotionEnd:N,onMousemove:a}),null)}})])}}});function it(n){var e=n.dropPosition,t=n.dropLevelOffset,l=n.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"".concat(2,"px")};switch(e){case-1:o.top=0,o.left="".concat(-t*l,"px");break;case 1:o.bottom=0,o.left="".concat(-t*l,"px");break;case 0:o.bottom=0,o.left="".concat(l);break}return _("div",{style:o},null)}var dt=10;const ct=Te({compatConfig:{MODE:3},name:"Tree",inheritAttrs:!1,slots:["checkable","title","icon","titleRender"],props:Sn(Zn(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:it,allowDrop:function(){return!0}}),setup:function(e,t){var l=t.attrs,o=t.slots,c=t.expose,d=te(!1),r={},u=te(),f=ce([]),k=ce([]),g=ce([]),p=ce([]),N=ce([]),x=ce([]),E={},a=Gn({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),h=ce([]);ke([function(){return e.treeData},function(){return e.children}],function(){h.value=e.treeData!==void 0?vn(e.treeData).slice():kn(vn(e.children))},{immediate:!0,deep:!0});var K=ce({}),O=te(!1),B=te(null),$=te(!1),V=L(function(){return Xe(e.fieldNames)}),ae=te(),U=null,I=null,Z=null,w=L(function(){return{expandedKeysSet:P.value,selectedKeysSet:A.value,loadedKeysSet:j.value,loadingKeysSet:re.value,checkedKeysSet:q.value,halfCheckedKeysSet:le.value,dragOverNodeKey:a.dragOverNodeKey,dropPosition:a.dropPosition,keyEntities:K.value}}),P=L(function(){return new Set(x.value)}),A=L(function(){return new Set(f.value)}),j=L(function(){return new Set(p.value)}),re=L(function(){return new Set(N.value)}),q=L(function(){return new Set(k.value)}),le=L(function(){return new Set(g.value)});Pe(function(){if(h.value){var m=na(h.value,{fieldNames:V.value});K.value=D(Y({},Oe,ta),m.keyEntities)}});var W=!1;ke([function(){return e.expandedKeys},function(){return e.autoExpandParent},K],function(m,v){var s=Me(m,2);s[0];var y=s[1],R=Me(v,2);R[0];var F=R[1],T=x.value;if(e.expandedKeys!==void 0||W&&y!==F)T=e.autoExpandParent||!W&&e.defaultExpandParent?Kn(e.expandedKeys,K.value):e.expandedKeys;else if(!W&&e.defaultExpandAll){var S=D({},K.value);delete S[Oe],T=Object.keys(S).map(function(M){return S[M].key})}else!W&&e.defaultExpandedKeys&&(T=e.autoExpandParent||e.defaultExpandParent?Kn(e.defaultExpandedKeys,K.value):e.defaultExpandedKeys);T&&(x.value=T),W=!0},{immediate:!0});var X=ce([]);Pe(function(){X.value=qa(h.value,x.value,V.value)}),Pe(function(){e.selectable&&(e.selectedKeys!==void 0?f.value=Ln(e.selectedKeys,e):!W&&e.defaultSelectedKeys&&(f.value=Ln(e.defaultSelectedKeys,e)))});var ue=Za(K),J=ue.maxLevel,fe=ue.levelEntities;Pe(function(){if(e.checkable){var m;if(e.checkedKeys!==void 0?m=sn(e.checkedKeys)||{}:!W&&e.defaultCheckedKeys?m=sn(e.defaultCheckedKeys)||{}:h.value&&(m=sn(e.checkedKeys)||{checkedKeys:k.value,halfCheckedKeys:g.value}),m){var v=m,s=v.checkedKeys,y=s===void 0?[]:s,R=v.halfCheckedKeys,F=R===void 0?[]:R;if(!e.checkStrictly){var T=fn(y,!0,K.value,J.value,fe.value);y=T.checkedKeys,F=T.halfCheckedKeys}k.value=y,g.value=F}}}),Pe(function(){e.loadedKeys&&(p.value=e.loadedKeys)});var ie=function(){Ee(a,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},ye=function(v){ae.value.scrollTo(v)};ke(function(){return e.activeKey},function(){e.activeKey!==void 0&&(B.value=e.activeKey)},{immediate:!0}),ke(B,function(m){Cn(function(){m!==null&&ye({key:m})})},{immediate:!0,flush:"post"});var Ce=function(v){e.expandedKeys===void 0&&(x.value=v)},_e=function(){a.draggingNodeKey!==null&&Ee(a,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),U=null,Z=null},Ae=function(v,s){var y=e.onDragend;a.dragOverNodeKey=null,_e(),y==null||y({event:v,node:s.eventData}),I=null},$e=function m(v){Ae(v,null),window.removeEventListener("dragend",m)},Je=function(v,s){var y=e.onDragstart,R=s.eventKey,F=s.eventData;I=s,U={x:v.clientX,y:v.clientY};var T=De(x.value,R);a.draggingNodeKey=R,a.dragChildrenKeys=Wa(R,K.value),u.value=ae.value.getIndentWidth(),Ce(T),window.addEventListener("dragend",$e),y&&y({event:v,node:F})},Qe=function(v,s){var y=e.onDragenter,R=e.onExpand,F=e.allowDrop,T=e.direction,S=s.pos,M=s.eventKey;if(Z!==M&&(Z=M),!I){ie();return}var H=Tn(v,I,s,u.value,U,F,X.value,K.value,P.value,T),z=H.dropPosition,Q=H.dropLevelOffset,ee=H.dropTargetKey,oe=H.dropContainerKey,de=H.dropTargetPos,se=H.dropAllowed,ve=H.dragOverNodeKey;if(a.dragChildrenKeys.indexOf(ee)!==-1||!se){ie();return}if(r||(r={}),Object.keys(r).forEach(function(ne){clearTimeout(r[ne])}),I.eventKey!==s.eventKey&&(r[S]=window.setTimeout(function(){if(a.draggingNodeKey!==null){var ne=x.value.slice(),he=K.value[s.eventKey];he&&(he.children||[]).length&&(ne=we(x.value,s.eventKey)),Ce(ne),R&&R(ne,{node:s.eventData,expanded:!0,nativeEvent:v})}},800)),I.eventKey===ee&&Q===0){ie();return}Ee(a,{dragOverNodeKey:ve,dropPosition:z,dropLevelOffset:Q,dropTargetKey:ee,dropContainerKey:oe,dropTargetPos:de,dropAllowed:se}),y&&y({event:v,node:s.eventData,expandedKeys:x.value})},Ze=function(v,s){var y=e.onDragover,R=e.allowDrop,F=e.direction;if(!!I){var T=Tn(v,I,s,u.value,U,R,X.value,K.value,P.value,F),S=T.dropPosition,M=T.dropLevelOffset,H=T.dropTargetKey,z=T.dropContainerKey,Q=T.dropAllowed,ee=T.dropTargetPos,oe=T.dragOverNodeKey;a.dragChildrenKeys.indexOf(H)!==-1||!Q||(I.eventKey===H&&M===0?a.dropPosition===null&&a.dropLevelOffset===null&&a.dropTargetKey===null&&a.dropContainerKey===null&&a.dropTargetPos===null&&a.dropAllowed===!1&&a.dragOverNodeKey===null||ie():S===a.dropPosition&&M===a.dropLevelOffset&&H===a.dropTargetKey&&z===a.dropContainerKey&&ee===a.dropTargetPos&&Q===a.dropAllowed&&oe===a.dragOverNodeKey||Ee(a,{dropPosition:S,dropLevelOffset:M,dropTargetKey:H,dropContainerKey:z,dropTargetPos:ee,dropAllowed:Q,dragOverNodeKey:oe}),y&&y({event:v,node:s.eventData}))}},en=function(v,s){Z===s.eventKey&&!v.currentTarget.contains(v.relatedTarget)&&(ie(),Z=null);var y=e.onDragleave;y&&y({event:v,node:s.eventData})},nn=function(v,s){var y,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=a.dragChildrenKeys,T=a.dropPosition,S=a.dropTargetKey,M=a.dropTargetPos,H=a.dropAllowed;if(!!H){var z=e.onDrop;if(a.dragOverNodeKey=null,_e(),S!==null){var Q=D(D({},bn(S,vn(w.value))),{},{active:((y=C.value)===null||y===void 0?void 0:y.key)===S,data:K.value[S].node});F.indexOf(S);var ee=En(M),oe={event:v,node:mn(Q),dragNode:I?I.eventData:null,dragNodesKeys:[I.eventKey].concat(F),dropToGap:T!==0,dropPosition:T+Number(ee[ee.length-1])};R||z==null||z(oe),I=null}}},an=function(v,s){var y=e.onClick;y&&y(v,s)},tn=function(v,s){var y=e.onDblclick;y&&y(v,s)},je=function(v,s){var y=f.value,R=e.onSelect,F=e.multiple,T=s.selected,S=s[V.value.key],M=!T;M?F?y=we(y,S):y=[S]:y=De(y,S);var H=K.value,z=y.map(function(Q){var ee=H[Q];return ee?ee.node:null}).filter(function(Q){return Q});e.selectedKeys===void 0&&(f.value=y),R&&R(y,{event:"select",selected:M,node:s,selectedNodes:z,nativeEvent:v})},Ge=function(v,s,y){var R=e.checkStrictly,F=e.onCheck,T=s[V.value.key],S,M={event:"check",node:s,checked:y,nativeEvent:v},H=K.value;if(R){var z=y?we(k.value,T):De(k.value,T),Q=De(g.value,T);S={checked:z,halfChecked:Q},M.checkedNodes=z.map(function(ne){return H[ne]}).filter(function(ne){return ne}).map(function(ne){return ne.node}),e.checkedKeys===void 0&&(k.value=z)}else{var ee=fn([].concat(xe(k.value),[T]),!0,H,J.value,fe.value),oe=ee.checkedKeys,de=ee.halfCheckedKeys;if(!y){var se=new Set(oe);se.delete(T);var ve=fn(Array.from(se),{checked:!1,halfCheckedKeys:de},H,J.value,fe.value);oe=ve.checkedKeys,de=ve.halfCheckedKeys}S=oe,M.checkedNodes=[],M.checkedNodesPositions=[],M.halfCheckedKeys=de,oe.forEach(function(ne){var he=H[ne];if(!!he){var ge=he.node,Se=he.pos;M.checkedNodes.push(ge),M.checkedNodesPositions.push({node:ge,pos:Se})}}),e.checkedKeys===void 0&&(k.value=oe,g.value=de)}F&&F(S,M)},He=function(v){var s=v[V.value.key],y=new Promise(function(R,F){var T=e.loadData,S=e.onLoad;if(!T||j.value.has(s)||re.value.has(s))return null;var M=T(v);M.then(function(){var H=we(p.value,s),z=De(N.value,s);S&&S(H,{event:"load",node:v}),e.loadedKeys===void 0&&(p.value=H),N.value=z,R()}).catch(function(H){var z=De(N.value,s);if(N.value=z,E[s]=(E[s]||0)+1,E[s]>=dt){var Q=we(p.value,s);e.loadedKeys===void 0&&(p.value=Q),R()}F(H)}),N.value=we(N.value,s)});return y.catch(function(){}),y},rn=function(v,s){var y=e.onMouseenter;y&&y({event:v,node:s})},on=function(v,s){var y=e.onMouseleave;y&&y({event:v,node:s})},ln=function(v,s){var y=e.onRightClick;y&&(v.preventDefault(),y({event:v,node:s}))},We=function(v){var s=e.onFocus;O.value=!0,s&&s(v)},dn=function(v){var s=e.onBlur;O.value=!1,Ne(null),s&&s(v)},Le=function(v,s){var y=x.value,R=e.onExpand,F=e.loadData,T=s.expanded,S=s[V.value.key];if(!$.value){y.indexOf(S);var M=!T;if(M?y=we(y,S):y=De(y,S),Ce(y),R&&R(y,{node:s,expanded:M,nativeEvent:v}),M&&F){var H=He(s);H&&H.then(function(){}).catch(function(z){var Q=De(x.value,S);Ce(Q),Promise.reject(z)})}}},Ue=function(){$.value=!0},cn=function(){setTimeout(function(){$.value=!1})},Ne=function(v){var s=e.onActiveChange;B.value!==v&&(e.activeKey!==void 0&&(B.value=v),v!==null&&ye({key:v}),s&&s(v))},C=L(function(){return B.value===null?null:X.value.find(function(m){var v=m.key;return v===B.value})||null}),i=function(v){var s=X.value.findIndex(function(F){var T=F.key;return T===B.value});s===-1&&v<0&&(s=X.value.length),s=(s+v+X.value.length)%X.value.length;var y=X.value[s];if(y){var R=y.key;Ne(R)}else Ne(null)},b=L(function(){return mn(D(D({},bn(B.value,w.value)),{},{data:C.value.data,active:!0}))}),G=function(v){var s=e.onKeydown,y=e.checkable,R=e.selectable;switch(v.which){case Ie.UP:{i(-1),v.preventDefault();break}case Ie.DOWN:{i(1),v.preventDefault();break}}var F=C.value;if(F&&F.data){var T=F.data.isLeaf===!1||!!(F.data.children||[]).length,S=b.value;switch(v.which){case Ie.LEFT:{T&&P.value.has(B.value)?Le({},S):F.parent&&Ne(F.parent.key),v.preventDefault();break}case Ie.RIGHT:{T&&!P.value.has(B.value)?Le({},S):F.children&&F.children.length&&Ne(F.children[0].key),v.preventDefault();break}case Ie.ENTER:case Ie.SPACE:{y&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?Ge({},S,!q.value.has(B.value)):!y&&R&&!S.disabled&&S.selectable!==!1&&je({},S);break}}}s&&s(v)};return c({onNodeExpand:Le,scrollTo:ye,onKeydown:G,selectedKeys:L(function(){return f.value}),checkedKeys:L(function(){return k.value}),halfCheckedKeys:L(function(){return g.value}),loadedKeys:L(function(){return p.value}),loadingKeys:L(function(){return N.value}),expandedKeys:L(function(){return x.value})}),Ca(function(){window.removeEventListener("dragend",$e),d.value=!0}),Ba({expandedKeys:x,selectedKeys:f,loadedKeys:p,loadingKeys:N,checkedKeys:k,halfCheckedKeys:g,expandedKeysSet:P,selectedKeysSet:A,loadedKeysSet:j,loadingKeysSet:re,checkedKeysSet:q,halfCheckedKeysSet:le,flattenNodes:X}),function(){var m,v=a.draggingNodeKey,s=a.dropLevelOffset,y=a.dropContainerKey,R=a.dropTargetKey,F=a.dropPosition,T=a.dragOverNodeKey,S=e.prefixCls,M=e.showLine,H=e.focusable,z=e.tabindex,Q=z===void 0?0:z,ee=e.selectable,oe=e.showIcon,de=e.icon,se=de===void 0?o.icon:de,ve=e.switcherIcon,ne=e.draggable,he=e.checkable,ge=e.checkStrictly,Se=e.disabled,Ve=e.motion,un=e.loadData,oa=e.filterTreeNode,la=e.height,ia=e.itemHeight,da=e.virtual,ca=e.dropIndicatorRender,ua=e.onContextmenu,va=e.onScroll,sa=e.direction,fa=l.class,ya=l.style,ha=qn(D(D({},e),l),{aria:!0,data:!0}),Ye;return ne&&(Fe(ne)==="object"?Ye=ne:typeof ne=="function"?Ye={nodeDraggable:ne}:Ye={}),_(Ma,{value:{prefixCls:S,selectable:ee,showIcon:oe,icon:se,switcherIcon:ve,draggable:Ye,draggingNodeKey:v,checkable:he,customCheckable:o.checkable,checkStrictly:ge,disabled:Se,keyEntities:K.value,dropLevelOffset:s,dropContainerKey:y,dropTargetKey:R,dropPosition:F,dragOverNodeKey:T,dragging:v!==null,indent:u.value,direction:sa,dropIndicatorRender:ca,loadData:un,filterTreeNode:oa,onNodeClick:an,onNodeDoubleClick:tn,onNodeExpand:Le,onNodeSelect:je,onNodeCheck:Ge,onNodeLoad:He,onNodeMouseEnter:rn,onNodeMouseLeave:on,onNodeContextMenu:ln,onNodeDragStart:Je,onNodeDragEnter:Qe,onNodeDragOver:Ze,onNodeDragLeave:en,onNodeDragEnd:Ae,onNodeDrop:nn,slots:o}},{default:function(){return[_("div",{role:"tree",class:Ke(S,fa,(m={},Y(m,"".concat(S,"-show-line"),M),Y(m,"".concat(S,"-focused"),O.value),Y(m,"".concat(S,"-active-focused"),B.value!==null),m))},[_(lt,D({ref:ae,prefixCls:S,style:ya,disabled:Se,selectable:ee,checkable:!!he,motion:Ve,height:la,itemHeight:ia,virtual:da,focusable:H,focused:O.value,tabindex:Q,activeItem:C.value,onFocus:We,onBlur:dn,onKeydown:G,onActiveChange:Ne,onListChangeStart:Ue,onListChangeEnd:cn,onContextmenu:ua,onScroll:va},ha),null)])]}})}}});function ut(n,e,t,l){var o=l.isLeaf,c=l.expanded,d=l.loading,r=e;if(d)return _(Na,{class:"".concat(n,"-switcher-loading-icon")},null);var u;t&&Fe(t)==="object"&&(u=t.showLeafIcon);var f=null,k="".concat(n,"-switcher-icon");return o?(t&&(Fe(t)==="object"&&!u?f=_("span",{class:"".concat(n,"-switcher-leaf-line")},null):f=_(Un,{class:"".concat(n,"-switcher-line-icon")},null)),f):(f=_(Sa,{class:k},null),t&&(f=c?_(Da,{class:"".concat(n,"-switcher-line-icon")},null):_(Ea,{class:"".concat(n,"-switcher-line-icon")},null)),typeof e=="function"?r=e(D(D({},l),{},{defaultIcon:f,switcherCls:k})):wa(r)&&(r=Pa(r,{class:k})),r||f)}var Rn=4;function vt(n){var e,t=n.dropPosition,l=n.dropLevelOffset,o=n.prefixCls,c=n.indent,d=n.direction,r=d===void 0?"ltr":d,u=r==="ltr"?"left":"right",f=r==="ltr"?"right":"left",k=(e={},Y(e,u,"".concat(-l*c+Rn,"px")),Y(e,f,0),e);switch(t){case-1:k.top="".concat(-3,"px");break;case 1:k.bottom="".concat(-3,"px");break;default:k.bottom="".concat(-3,"px"),k[u]="".concat(c+Rn,"px");break}return _("div",{style:k,class:"".concat(o,"-drop-indicator")},null)}var ra=function(){var e=Zn();return D(D({},e),{},{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:me.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:me.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const qe=Te({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:Sn(ra(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,t){var l=t.attrs,o=t.expose,c=t.emit,d=t.slots;jn(!(e.treeData===void 0&&d.default));var r=Vn("tree",e),u=r.prefixCls,f=r.direction,k=r.virtual,g=te(),p=function(h){var K;(K=g.value)===null||K===void 0||K.scrollTo(h)};o({treeRef:g,onNodeExpand:function(){for(var h,K=arguments.length,O=new Array(K),B=0;B<K;B++)O[B]=arguments[B];(h=g.value)===null||h===void 0||h.onNodeExpand.apply(h,O)},scrollTo:p,selectedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.selectedKeys}),checkedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.checkedKeys}),halfCheckedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.halfCheckedKeys}),loadedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.loadedKeys}),loadingKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.loadingKeys}),expandedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.expandedKeys})}),Pe(function(){Oa(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});var N=function(h,K){c("update:checkedKeys",h),c("check",h,K)},x=function(h,K){c("update:expandedKeys",h),c("expand",h,K)},E=function(h,K){c("update:selectedKeys",h),c("select",h,K)};return function(){var a,h=e.showIcon,K=e.showLine,O=e.switcherIcon,B=O===void 0?d.switcherIcon:O,$=e.icon,V=$===void 0?d.icon:$,ae=e.blockNode,U=e.checkable,I=e.selectable,Z=e.fieldNames,w=Z===void 0?e.replaceFields:Z,P=e.motion,A=P===void 0?e.openAnimation:P,j=e.itemHeight,re=j===void 0?28:j,q=e.onDoubleclick,le=e.onDblclick,W=D(D(D({},l),Nn(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{},{showLine:Boolean(K),dropIndicatorRender:vt,fieldNames:w,icon:V,itemHeight:re}),X=d.default?ze(d.default()):void 0;return _(ct,D(D({},W),{},{virtual:k.value,motion:A,ref:g,prefixCls:u.value,class:Ke((a={},Y(a,"".concat(u.value,"-icon-hide"),!h),Y(a,"".concat(u.value,"-block-node"),ae),Y(a,"".concat(u.value,"-unselectable"),!I),Y(a,"".concat(u.value,"-rtl"),f.value==="rtl"),a),l.class),direction:f.value,checkable:U,selectable:I,switcherIcon:function(J){return ut(u.value,B,K,J)},onCheck:N,onExpand:x,onSelect:E,onDblclick:le||q,children:X}),D(D({},d),{},{checkable:function(){return _("span",{class:"".concat(u.value,"-checkbox-inner")},null)}}))}}});var be;(function(n){n[n.None=0]="None",n[n.Start=1]="Start",n[n.End=2]="End"})(be||(be={}));function wn(n,e,t){function l(o){var c=o[e.key],d=o[e.children];t(c,o)!==!1&&wn(d||[],e,t)}n.forEach(l)}function st(n){var e=n.treeData,t=n.expandedKeys,l=n.startKey,o=n.endKey,c=n.fieldNames,d=c===void 0?{title:"title",key:"key",children:"children"}:c,r=[],u=be.None;if(l&&l===o)return[l];if(!l||!o)return[];function f(k){return k===l||k===o}return wn(e,d,function(k){if(u===be.End)return!1;if(f(k)){if(r.push(k),u===be.None)u=be.Start;else if(u===be.Start)return u=be.End,!1}else u===be.Start&&r.push(k);return t.indexOf(k)!==-1}),r}function yn(n,e,t){var l=xe(e),o=[];return wn(n,t,function(c,d){var r=l.indexOf(c);return r!==-1&&(o.push(d),l.splice(r,1)),!!l.length}),o}var ft=["icon","blockNode"],yt=function(){return D(D({},ra()),{},{expandAction:{type:[Boolean,String]}})};function ht(n){var e=n.isLeaf,t=n.expanded;return e?_(Un,null,null):t?_(Ta,null,null):_(La,null,null)}const hn=Te({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:Sn(yt(),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,t){var l,o=t.attrs,c=t.slots,d=t.emit,r=t.expose,u=te(e.treeData||kn(ze((l=c.default)===null||l===void 0?void 0:l.call(c))));ke(function(){return e.treeData},function(){u.value=e.treeData}),Wn(function(){Cn(function(){if(e.treeData===void 0&&c.default){var w;u.value=kn(ze((w=c.default)===null||w===void 0?void 0:w.call(c)))}})});var f=te(),k=te(),g=L(function(){return Xe(e.fieldNames)}),p=te(),N=function(P){var A;(A=p.value)===null||A===void 0||A.scrollTo(P)};r({scrollTo:N,selectedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.selectedKeys}),checkedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.checkedKeys}),halfCheckedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.halfCheckedKeys}),loadedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.loadedKeys}),loadingKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.loadingKeys}),expandedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.expandedKeys})});var x=function(){var P=na(u.value,{fieldNames:g.value}),A=P.keyEntities,j;return e.defaultExpandAll?j=Object.keys(A):e.defaultExpandParent?j=Kn(e.expandedKeys||e.defaultExpandedKeys||[],A):j=e.expandedKeys||e.defaultExpandedKeys,j},E=te(e.selectedKeys||e.defaultSelectedKeys||[]),a=te(x());ke(function(){return e.selectedKeys},function(){e.selectedKeys!==void 0&&(E.value=e.selectedKeys)},{immediate:!0}),ke(function(){return e.expandedKeys},function(){e.expandedKeys!==void 0&&(a.value=e.expandedKeys)},{immediate:!0});var h=function(P,A){var j=A.isLeaf;j||P.shiftKey||P.metaKey||P.ctrlKey||p.value.onNodeExpand(P,A)},K=Fa(h,200,{leading:!0}),O=function(P,A){e.expandedKeys===void 0&&(a.value=P),d("update:expandedKeys",P),d("expand",P,A)},B=function(P,A){var j=e.expandAction;j==="click"&&K(P,A),d("click",P,A)},$=function(P,A){var j=e.expandAction;(j==="dblclick"||j==="doubleclick")&&K(P,A),d("doubleclick",P,A),d("dblclick",P,A)},V=function(P,A){var j=e.multiple,re=A.node,q=A.nativeEvent,le=re[g.value.key],W=D(D({},A),{},{selected:!0}),X=(q==null?void 0:q.ctrlKey)||(q==null?void 0:q.metaKey),ue=q==null?void 0:q.shiftKey,J;j&&X?(J=P,f.value=le,k.value=J,W.selectedNodes=yn(u.value,J,g.value)):j&&ue?(J=Array.from(new Set([].concat(xe(k.value||[]),xe(st({treeData:u.value,expandedKeys:a.value,startKey:le,endKey:f.value,fieldNames:g.value}))))),W.selectedNodes=yn(u.value,J,g.value)):(J=[le],f.value=le,k.value=J,W.selectedNodes=yn(u.value,J,g.value)),d("update:selectedKeys",J),d("select",J,W),e.selectedKeys===void 0&&(E.value=J)},ae=function(P,A){d("update:checkedKeys",P),d("check",P,A)},U=Vn("tree",e),I=U.prefixCls,Z=U.direction;return function(){var w=Ke("".concat(I.value,"-directory"),Y({},"".concat(I.value,"-directory-rtl"),Z.value==="rtl"),o.class),P=e.icon,A=P===void 0?c.icon:P,j=e.blockNode,re=j===void 0?!0:j,q=Be(e,ft);return _(qe,D(D(D({},o),{},{icon:A||ht,ref:p,blockNode:re},q),{},{prefixCls:I.value,class:w,expandedKeys:a.value,selectedKeys:E.value,onSelect:V,onClick:B,onDblclick:$,onExpand:O,onCheck:ae}),c)}}});var gn=pn;const Et=Ee(qe,{DirectoryTree:hn,TreeNode:gn,install:function(e){return e.component(qe.name,qe),e.component(gn.name,gn),e.component(hn.name,hn),e}});export{Et as _,fn as a,De as b,na as c,we as d,Za as u};
